(()=>{"use strict";const e=window.wp.hooks,t=window.wp.blockEditor,r=window.wp.components,s=window.wp.blocks,o=window.wp.data,i=window.wp.element,n=window.ReactJSXRuntime;(0,s.registerBlockVariation)("core/query",{name:"carousel-query-picker",title:"Carousel Query Picker",description:"A Query Loop variation that allows user to pick specific posts.",isActive:["namespace"],icon:"images-alt2",attributes:{namespace:"carousel-query-picker",className:"is-query-picker"},scope:["inserter"],keywords:["query"]}),(0,e.addFilter)("editor.BlockEdit","core/query",(e=>s=>{if("carousel-query-picker"!==s.attributes?.namespace)return(0,n.jsx)(e,{...s});const{attributes:c,setAttributes:u}=s,p=c?.query?.postType||"post",a=c?.query?.pickedPosts||[],l=(0,i.useRef)(p);(0,i.useEffect)((()=>{l.current!==p&&u({query:{...c.query,pickedPosts:[]}})}),[c?.query?.postType]);const d=(0,o.useSelect)((e=>e("core").getEntityRecords("postType",p,{per_page:-1})),[c?.query?.postType]),y=(null!=d?d:[]).map((e=>e.title.rendered)).sort(((e,t)=>e.localeCompare(t))),w=d?a.map((e=>{const t=d.find((t=>t.id===e));return t?t.title.rendered:null})):[];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e,{...s}),(0,n.jsx)(t.InspectorControls,{children:(0,n.jsx)(r.PanelBody,{title:"Query Options",children:(0,n.jsx)(r.FormTokenField,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1,label:p.charAt(0).toUpperCase()+p.slice(1)+"s",onChange:e=>{w.length=0,c.query.pickedPosts=[],e&&0!==e.length?(w.push(...e),c.query.pickedPosts=e.map((e=>{const t=d.find((t=>t.title.rendered===e));return t?t.id:null})),u({query:{...c.query}})):u({query:{...c.query}})},suggestions:y,value:w})})})]})}))})();