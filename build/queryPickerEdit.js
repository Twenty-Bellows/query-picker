(()=>{"use strict";const e=window.wp.hooks,t=window.wp.blockEditor,r=window.wp.components,o=window.wp.blocks,s=window.wp.data,n=window.wp.element,i=window.ReactJSXRuntime;(0,o.registerBlockVariation)("core/query",{name:"twenty-bellows/query-picker",title:"Query Picker",description:"A Query Loop variation that allows user to pick specific posts.",isActive:["namespace"],attributes:{namespace:"twenty-bellows/query-picker",className:"is-query-picker"},scope:["inserter","transform"],keywords:["query"],innerBlocks:[["core/post-template",{},[["core/post-title",{}]]]],transforms:{from:[{type:"block",blocks:["core/query"],transform:(e,t)=>createBlock("twenty-bellows/query-picker",e,t)}]}}),(0,e.addFilter)("editor.BlockEdit","core/query",(e=>o=>{if("twenty-bellows/query-picker"!==o.attributes?.namespace)return(0,i.jsx)(e,{...o});const{attributes:c,setAttributes:p}=o,l=c?.query?.postType||"post",u=c?.query?.pickedPosts||[],a=(0,n.useRef)(l);(0,n.useEffect)((()=>{a.current!==l&&p({query:{...c.query,pickedPosts:[]}})}),[c?.query?.postType]);const d=(0,s.useSelect)((e=>e("core").getEntityRecords("postType",l,{per_page:-1})),[c?.query?.postType]),y=(null!=d?d:[]).map((e=>e.title.rendered)).sort(((e,t)=>e.localeCompare(t))),w=d?u.map((e=>{const t=d.find((t=>t.id===e));return t?t.title.rendered:null})):[];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e,{...o}),(0,i.jsx)(t.InspectorControls,{children:(0,i.jsx)(r.PanelBody,{title:"Query Options",children:(0,i.jsx)(r.FormTokenField,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1,label:l.charAt(0).toUpperCase()+l.slice(1)+"s",onChange:e=>{w.length=0,c.query.pickedPosts=[],e&&0!==e.length?(w.push(...e),c.query.pickedPosts=e.map((e=>{const t=d.find((t=>t.title.rendered===e));return t?t.id:null})),p({query:{...c.query}})):p({query:{...c.query}})},suggestions:y,value:w})})})]})}))})();